В файле Queries.txt приведено множество поисковых запросов клиентов продукта СКАН (формат: UserId Query - разделитель табуляция). Описание языка запросов можно найти в файле "Синтаксис языка запросов.doc". Все термы в запросах можно разделить на два класса - объектные (например, термы ID, Org, Metadata, Source, DocumentType и т.п.) и фразовые (OrderedText, Text, OrderedWildcard и т.п.). СКАН стремится предоставить клиентам объектный поиск. Например, если клиент хочет поискать упоминания коррупции, то он выбирает соответствующую тематику из подсказок, а далее в систему идет объектный запрос (грубо говоря - идентификатор тематики), а не фразовый запрос с комбинацией слов типа "взятка", "хищение", "коррупция". Поэтому любое использование фразовых термов клиентом в поисковом запросе можно трактовать как то, что либо в СКАНе нет готового объекта (организации, персоны, типа события, локации в объектном виде), либо клиент не смог его найти. 

Наше задание заключается в том, чтобы выделить из запросов их фразовую составляющую, откластеризовать и таким образом предложить описание отсутствующих в СКАНе объектов. Из множества объектов мы предлагаем сосредоточиться на тематиках и типах событий - грубо говоря на всём, что не является названиями (не организации, не персоны, не локации).
В качестве реперных точек мы даем облака слов (файл ThemesWordClouds.json), соответствующие уже существующим в СКАНе типам событий (это не запросы, описывающие их, а именно облака слов, взятые из достаточно сложных правил выделения типов событий). Например, если мы увидим кластер слов "взятка", "хищение", "коррупция", то он хорошо сматчится с типом события "коррупция". Мы предполагаем, что если удастся подобрать кластеризацию запросов так, что часть кластеров будет хорошо соответствовать этим облакам слов готовых тематик (это те кейсы, когда клиенты не нашли тематику или решили зачем-то еще описать ее фразами), то остальные кластеры будут достаточно осмысленны. То есть реперные облака слов позволяют из всего множества возможных разбиений автоматически выбрать осмысленные. Для анализа ВЫ можете и не использовать облака слов совсем, а предложить альтернативное решение, но конечной целью являются именно облака (наборы) слов из пользовательских запросов, соответствующие существующим или новым тематикам в плоском или иерархическом виде, а также числовой показатель их соответствия на основе некоторой предложенной вами метрики.

Помимо этого, мы хотим определить группы клиентов (клиентских идентификаторов), которые отправляют в систему похожие запросы. Здесь для кластеризации можно не ограничиваться только фразовыми термами, а использовать также и идентификаторы объектов в запросах. Мы предполагаем, что такая кластеризация позволит нам выявить клиентов-конкурентов, в зоне интересов которых находятся одни и те же объекты информационного поля. Таким образом в будущем мы сможем сформировать рекомендательную систему и оптимизировать поиск, дополняя и расширяя поисковые запросы новыми подходящими клиентам объектами.


Рассмотрим задачу сопоставления запросов с тематиками. Например, имеем поисковый запрос, содержащий фразовые термы:

(Text(\"архангельская область\") AND Text(\"повышение тарифов\") AND Text(\"электроэнергия\"))

Если из запроса убрать фразовый терм, содержащий имя собственное - "Архангельская область", то оставшиеся фразовые термы попадают в тематику "Цены на электроэнергию". Такой вывод можно сделать, проанализировав покрытие термов из запроса облаком тегов данной тематики:

  {
    "Theme": "Цены на электроэнергию",
    "WordCloud": [
      "цены",
      "электроэнергию",
      "цена",
      "стоимость",
      "тариф",
      "электроэнергия",
      "электричество",
      "электроснабжение",
      "электроэнергетика",
      "падение",
      "упасть",
      "падать",
      "снижение",
      "снизить",
      "снижать",
      "снизиться",
      "снижаться",
      "понизить",
      "понизиться",
      "понижать",
      "понижаться",
      "понижение",
      "рост",
      "прирост",
      "увеличение",
      "увеличить",
      "увеличивать",
      "увеличиваться",
      "расти",
      "увеличиться",
      "вырасти",
      "возрасти",
      "подъем",
      "подниматься",
      "поднять",
      "поднимать",
      "подняться",
      "взвинтить",
      "взлететь",
      "взлет",
      "взвинчивание",
      "повысить",
      "повыситься",
      "повышать",
      "повышаться",
      "повышение"
    ]
  }

В данном случае терм "электроэнергия" содержится в облаке тегов в явном виде, а составной терм "повышение тарифов" - входит в облако тегов пословно - отдельно "повышение" и отдельно "тариф".


Рассмотрим другой пример:

(((Metadata(Id(825CEB))) OR (Text(\\\"Санкционный товар\\\")) OR (InTitle(Text(\\\"Санкции\\\"))) OR (Text(\\\"Список SDN\\\")) OR (Text(\\\"Отключение SWIFT\\\")) OR (InTitle(Text(\\\"Пакет санкций\\\"))) OR (Text(\\\"Санкции против РФ\\\")) OR (OrderedText(\\\"товары двойного назначения\\\"))) AND (((Org(Id(C03E91),main) AND Org(Id(C03E91)))) OR (Text(\\\"Санкции США\\\")) OR (Header(Text(\\\"ЕС\\\"))) OR (InTitle(Text(\\\"Европейские санкции\\\"))) OR (Header(Text(\\\"OFAC\\\")))) AND (Location(Id(4C8BB)))) 

Выделим фразовые термы, не являющиеся именами собственными, входящие в запрос:
Санкционный товар
Санкции
Список SDN
Отключение SWIFT
Пакет санкций
Санкции против РФ
товары двойного назначения
Санкции США
Европейские санкции

Большинство составных термов содержат слово "санкции". Можно сказать, что данный запрос частично покрывается одноименной темой:
{
    "Theme": "Санкции",
    "WordCloud": [
      "санкция",
      "санкционный",
      "мера",
      "список",
      "реестр",
      "пакет",
      "блок",
      "блокада",
      "блокирование",
      "блокировка",
      "ограничение",
      "режим",
      "требование",
      "риторика",
      "давление",
      "война",
      "санкции",
      "торговый",
      "экономический",
      "военный",
      "финансовый",
      "дипломатический",
      "секторальный",
      "первичный",
      "вторичный",
      "автономный",
      "таргетированный",
      "международный",
      "блокирующий",
      "антироссийский",
      "западный",
      "против",
      "оон",
      "евросоюз",
      "совбез",
      "применить",
      "применяться",
      "применять",
      "применение",
      "принять",
      "принимать",
      "ввести",
      "вводить",
      "введение",
      "направить",
      "налагаться",
      "наложить",
      "накладывать",
      "попадать",
      "ужесточить",
      "вынести",
      "возобновить",
      "возобновление",
      "обещать",
      "пригрозить",
      "грозить",
      "угрожать",
      "предлагать",
      "увеличить",
      "усилить",
      "обжаловать",
      "рассматривать",
      "инициировать",
      "последовать",
      "усиление",
      "расширить",
      "расширение",
      "готовить",
      "подготовить",
      "вернуть",
      "восстановить",
      "ударить",
      "анонсировать",
      "наложение",
      "продолжение",
      "продлить",
      "продлевать",
      "продлеваться",
      "продление",
      "отношении",
      "для",
      "аннулировать",
      "снять",
      "аннулирование",
      "снятие",
      "смягчить",
      "смягчение",
      "ослабить",
      "ослабление",
      "отсрочить",
      "отменить",
      "отмена",
      "обойти",
      "обходить",
      "нарушить",
      "нарушать",
      "подвергнуться",
      "попасть",
      "оказаться",
      "подпасть",
      "подпадать",
      "нст",
      "прш",
      "поддержать",
      "поддерживать",
      "присоединиться",
      "присоединяться",
      "поддержка",
      "голосовать",
      "проголосовать",
      "выступить",
      "выступать",
      "фигурировать",
      "значиться",
      "быть",
      "являться",
      "существовать",
      "появиться",
      "появляться",
      "стать",
      "становиться",
      "считаться",
      "числиться",
      "оказываться",
      "иметься",
      "пребывать",
      "находиться",
      "наличествовать",
      "присутствовать",
      "под",
      "внести",
      "вносить",
      "добавить",
      "внесение",
      "добавление",
      "исключить",
      "исключение",
      "кандидат",
      "фигурант",
      "жертва",
      "распространяться",
      "распространиться",
      "распространение",
      "мешать",
      "препятствовать",
      "помешать",
      "стеснять",
      "стеснить",
      "ограничивать",
      "ограничить",
      "вредить",
      "навредить",
      "затруднить",
      "осложнить",
      "осложнять",
      "усугублять",
      "усугубить",
      "страдать",
      "пострадать",
      "перестать",
      "остановить",
      "разорвать",
      "разрывать",
      "пректратить",
      "уйти",
      "падение курса акций",
      "ненадежный",
      "переставать",
      "надежный"
    ]
  }
  
  
  
Еще один пример: 
((((((Text("взрыв")) OR (Text("чп")) OR (Text("катастрофа")) OR (Text("обесточивание")) OR (Text("обесточили")) OR (Text("арест")) OR (Text("авария")) OR (Text("бедствие")) OR (Text("обвинение")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(10A9575)))) OR (((Text("взрыв")) OR (Text("чп")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("обесточили")) OR (Text("бедствие")) OR (Text("обвинение")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825C90))) OR (Metadata(Id(825CA2)))) AND (Org(Id(7AD37)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(87583)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(7C5B4)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(830D3)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825C90)))) AND (Org(Id(41957EE)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("обесточили")) OR (Text("чп")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(6E6970)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825C90))) OR (Metadata(Id(825CA2)))) AND (Org(Id(7C50D)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825C90))) OR (Metadata(Id(825CA2)))) AND (Org(Id(8F741)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825C90)))) AND (Org(Id(82789)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Text("чп")) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825C90)))) AND (Org(Id(8CA52)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825C90)))) AND (Org(Id(837BD)))) OR (((Text("взрыв")) OR (Text("катастофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(8CE63)))) OR (((Text("взрыв")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("происшествие")) OR (Text("обесточили")) OR (Text("конфликт")) OR (Text("коррупция")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(8CE57)))) OR (((Text("взрыв")) OR (Text("происшествие")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("конфликт")) OR (Text("коррупция")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(88B87)))) OR (((Text("взрыв")) OR (Text("происшествие") AND Text("пожар")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("конфликт")) OR (Text("коррупция")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(88B87)))) OR (((Text("взрыв")) OR (Text("происшествие")) OR (Text("катастрофа")) OR (Text("арест")) OR (Text("авария")) OR (Text("обесточивание")) OR (Text("чп")) OR (Text("обесточили")) OR (Text("конфликт")) OR (Text("коррупция")) OR (Text("обвинение")) OR (Text("бедствие")) OR (Metadata(Id(825CB0))) OR (Metadata(Id(825CA2))) OR (Metadata(Id(825C90)))) AND (Org(Id(8D054))))) AND NOT(Text("водоснабжение")) AND NOT(Text("потоп")) AND NOT(Text("затопление"))) AND ((Metadata(SourceRegion(989680)) AND Metadata(SourceCategory({13,14,3,4,2,7,1A,B,D,E}))) AND NOT(DocumentType({0,1,3,5})))) 

Данный запрос может покрываться несколькими темами:
"Техногенные катастрофы"
"Чрезвычайные происшествия, чрезвычайные ситуации"
"Отключение электроэнергии"